<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>W-View | ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù‚ØµÙŠØ±Ø©</title>
    <style>
        /* [1] Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
            touch-action: pan-y;
            overflow-x: hidden;
        }

        /* [2] Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        #app {
            position: relative;
            height: 100vh;
            overflow: hidden;
        }
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7), transparent);
            z-index: 100;
            text-align: center;
        }
        .logo {
            font-size: 20px;
            font-weight: bold;
            color: #ff0050;
        }

        /* [3] Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª */
        .video-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease;
        }
        .video-item {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }
        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* [4] Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .video-info {
            position: absolute;
            bottom: 100px;
            left: 20px;
            max-width: 80%;
            z-index: 10;
        }
        .video-title {
            font-size: 18px;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(0,0,0,0.8);
        }
        .video-description {
            font-size: 14px;
            opacity: 0.8;
            text-shadow: 0 0 3px rgba(0,0,0,0.8);
        }

        /* [5] Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ */
        .actions {
            position: absolute;
            right: 20px;
            bottom: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }
        .action-btn {
            background: transparent;
            border: none;
            color: white;
            margin: 15px 0;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .action-icon {
            font-size: 28px;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        .action-count {
            font-size: 12px;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }

        /* [6] Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            color: white;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- [1] Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ -->
    <div id="app">
        <div class="header">
            <div class="logo">W-View</div>
        </div>
        
        <!-- [2] Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª -->
        <div class="video-container" id="videoContainer"></div>
        
        <!-- [3] Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <div class="loading" id="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª...</div>
    </div>

    <!-- [4] Ù…ÙƒØªØ¨Ø© Hammer.js Ù„Ù„Ø³Ø­Ø¨ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

    <script>
        // ========= [1] Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =========
        const videos = [
            {
                id: 1,
                url: 'https://assets.mixkit.co/videos/preview/mixkit-tree-with-yellow-flowers-1173-large.mp4',
                title: 'Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ Ø®Ù„Ø§Ø¨',
                description: 'Ø£Ø´Ø¬Ø§Ø± Ù…Ø²Ù‡Ø±Ø© ÙÙŠ ÙŠÙˆÙ… Ù…Ø´Ù…Ø³',
                likes: 245,
                comments: 32,
                shares: 12
            },
            {
                id: 2,
                url: 'https://assets.mixkit.co/videos/preview/mixkit-woman-dancing-under-neon-lights-1230-large.mp4',
                title: 'Ø±Ù‚Øµ ØªØ­Øª Ø§Ù„Ø£Ø¶ÙˆØ§Ø¡',
                description: 'Ø£Ø¯Ø§Ø¡ Ø±Ù‚Øµ Ø§Ø­ØªØ±Ø§ÙÙŠ',
                likes: 532,
                comments: 87,
                shares: 45
            },
            {
                id: 3,
                url: 'https://assets.mixkit.co/videos/preview/mixkit-man-doing-tricks-with-a-skateboard-34550-large.mp4',
                title: 'Ø­Ø±ÙƒØ§Øª ØªØ²Ù„Ø¬ Ù…Ù…ÙŠØ²Ø©',
                description: 'Ø£ÙØ¶Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ­',
                likes: 321,
                comments: 45,
                shares: 23
            }
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‡Ù†Ø§
        ];

        // ========= [2] Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =========
        let currentIndex = 0;
        let videoElements = [];
        let hammertime;

        // ========= [3] ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =========
        function initApp() {
            const videoContainer = document.getElementById('videoContainer');
            const loadingElement = document.getElementById('loading');

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            videos.forEach((video, index) => {
                const videoItem = createVideoElement(video, index);
                videoContainer.appendChild(videoItem);
            });

            // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            loadingElement.style.display = 'none';

            // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø£ÙˆÙ„
            playCurrentVideo();

            // ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø­Ø¨
            initSwipeSystem();
        }

        // ========= [4] Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± ÙÙŠØ¯ÙŠÙˆ =========
        function createVideoElement(video, index) {
            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            videoItem.dataset.id = video.id;
            videoItem.style.transform = `translateY(${index * 100}%)`;

            // Ø¹Ù†ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            const videoElement = document.createElement('video');
            videoElement.src = video.url;
            videoElement.loop = true;
            videoElement.playsInline = true;
            videoElement.muted = true; // Ù…Ù‡Ù… Ù„Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            const videoInfo = document.createElement('div');
            videoInfo.className = 'video-info';
            videoInfo.innerHTML = `
                <h3 class="video-title">${video.title}</h3>
                <p class="video-description">${video.description}</p>
            `;

            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„
            const actions = document.createElement('div');
            actions.className = 'actions';
            actions.innerHTML = `
                <button class="action-btn" onclick="likeVideo(${video.id})">
                    <span class="action-icon">â¤ï¸</span>
                    <span class="action-count">${video.likes}</span>
                </button>
                <button class="action-btn" onclick="commentVideo(${video.id})">
                    <span class="action-icon">ğŸ’¬</span>
                    <span class="action-count">${video.comments}</span>
                </button>
                <button class="action-btn" onclick="shareVideo(${video.id})">
                    <span class="action-icon">â†—ï¸</span>
                    <span class="action-count">${video.shares}</span>
                </button>
            `;

            videoItem.appendChild(videoElement);
            videoItem.appendChild(videoInfo);
            videoItem.appendChild(actions);

            videoElements.push({
                element: videoItem,
                video: videoElement,
                id: video.id
            });

            return videoItem;
        }

        // ========= [5] Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø­Ø¨ =========
        function initSwipeSystem() {
            hammertime = new Hammer(document.getElementById('app'));
            hammertime.get('pan').set({ direction: Hammer.DIRECTION_VERTICAL });

            let startY = 0;
            let currentY = 0;
            let isDragging = false;

            hammertime.on('panstart', function(e) {
                isDragging = true;
                startY = e.center.y;
                pauseCurrentVideo();
            });

            hammertime.on('panmove', function(e) {
                if (!isDragging) return;
                currentY = e.center.y - startY;
                updateVideoPosition();
            });

            hammertime.on('panend', function() {
                if (!isDragging) return;
                isDragging = false;

                const threshold = window.innerHeight / 4;
                if (Math.abs(currentY) > threshold) {
                    if (currentY < 0 && currentIndex < videos.length - 1) {
                        currentIndex++; // Ø³Ø­Ø¨ Ù„Ø£Ø¹Ù„Ù‰
                    } else if (currentY > 0 && currentIndex > 0) {
                        currentIndex--; // Ø³Ø­Ø¨ Ù„Ø£Ø³ÙÙ„
                    }
                }

                animateToCurrentVideo();
            });
        }

        // ========= [6] Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª =========
        function playCurrentVideo() {
            videoElements.forEach((item, index) => {
                if (index === currentIndex) {
                    item.video.play()
                        .then(() => console.log("ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"))
                        .catch(e => console.log("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„:", e));
                } else {
                    item.video.pause();
                    item.video.currentTime = 0;
                }
            });
        }

        function pauseCurrentVideo() {
            if (videoElements[currentIndex]) {
                videoElements[currentIndex].video.pause();
            }
        }

        function updateVideoPosition() {
            videoElements.forEach((item, index) => {
                const offset = (index - currentIndex) * 100 + (currentY / window.innerHeight * 100);
                item.element.style.transform = `translateY(${offset}%)`;
            });
        }

        function animateToCurrentVideo() {
            videoElements.forEach((item, index) => {
                const offset = (index - currentIndex) * 100;
                item.element.style.transition = 'transform 0.3s ease-out';
                item.element.style.transform = `translateY(${offset}%)`;

                setTimeout(() => {
                    item.element.style.transition = '';
                }, 300);
            });

            setTimeout(() => {
                playCurrentVideo();
            }, 300);
        }

        // ========= [7] Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ =========
        function likeVideo(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (video) {
                video.likes++;
                updateActionCounts(videoId);
            }
        }

        function commentVideo(videoId) {
            const comment = prompt('Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ:');
            if (comment) {
                const video = videos.find(v => v.id === videoId);
                if (video) {
                    video.comments++;
                    updateActionCounts(videoId);
                }
            }
        }

        function shareVideo(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (video) {
                video.shares++;
                updateActionCounts(videoId);
                alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ' + video.url);
            }
        }

        function updateActionCounts(videoId) {
            const video = videos.find(v => v.id === videoId);
            if (!video) return;

            const videoElement = videoElements.find(v => v.id === videoId);
            if (!videoElement) return;

            const actionButtons = videoElement.element.querySelectorAll('.action-btn');
            if (actionButtons.length >= 3) {
                actionButtons[0].querySelector('.action-count').textContent = video.likes;
                actionButtons[1].querySelector('.action-count').textContent = video.comments;
                actionButtons[2].querySelector('.action-count').textContent = video.shares;
            }
        }

        // ========= [8] Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =========
        window.addEventListener('DOMContentLoaded', () => {
            // Ø§Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Hammer.js Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø­Ù…Ù„Ø§Ù‹
            if (typeof Hammer === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js';
                script.onload = initApp;
                document.head.appendChild(script);
            } else {
                initApp();
            }
        });

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
        document.addEventListener('click', function() {
            videoElements.forEach(item => {
                item.video.muted = false;
            });
        }, { once: true });
    </script>
</body>
</html>